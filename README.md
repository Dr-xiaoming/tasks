# Next.js 聊天应用

这是一个基于Next.js开发的实时聊天应用，使用轮询机制实现消息的准实时更新。

## 功能特点

- 用户注册和登录，使用JWT认证
- 支持私聊功能
- 消息轮询机制，确保消息及时更新
- 支持系统通知和奖励消息
- 自动处理令牌过期情况
- 移动端响应式设计

## 轮询聊天系统

本项目采用轮询机制来实现聊天消息的更新，不依赖于WebSocket。主要优势：

1. 更简单的实现方式
2. 更好的浏览器兼容性
3. 在复杂网络环境下更稳定
4. 避免WebSocket连接问题

轮询实现原理：
- 客户端每隔几秒钟向服务器发送请求，获取新消息
- 使用时间戳参数，只获取上次轮询后的新消息
- 服务器返回新消息后，客户端将其添加到消息列表中

## 技术栈

- Next.js 15
- React 18
- TypeScript
- Prisma (数据库ORM)
- JWT (认证)
- Ant Design (UI组件库)

## 开发和部署

### 安装依赖

```bash
npm install
```

### 数据库设置

```bash
npx prisma migrate dev
```

### 开发环境

```bash
npm run dev
```

### 生产环境

```bash
npm run build
npm run start
``` 